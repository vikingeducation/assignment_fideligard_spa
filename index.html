<!DOCTYPE html>
<html ng-app="StockPortfolioSimulator">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Fideligard Stock Portfolio Simulator</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

    <!-- Angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>

    <!-- UI-router -->
    <script src="/plugins/angular-ui-router.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <!-- CSS --> 
    <link rel="stylesheet" href="/stylesheets/index.css">

    <!-- Rangeslider -->
    <script src="/bower_components/rangeslider.js/dist/rangeslider.min.js"></script>
    <link rel="stylesheet" href="/bower_components/rangeslider.js/dist/rangeslider.css">

    <!-- Lodash -->
    <script src="/bower_components/lodash/lodash.js"></script>

    <!-- Moment -->
    <script src="/bower_components/moment/moment.js"></script>

  </head>
  <body ng-controller="StocksController">
    <!-- Nav -->
    <main-nav></main-nav>

    <main class="container">
      <div class="col-xs-6">

        <div class="view-container" id="get-stocks-container">
          <div id="get-stocks-header-container">
            <div class="sub-header">
              Retrieve Stock History
            </div>
          </div>

          <div id="buttons-container">
            <button class="btn btn-primary" id="all-button" ng-click="chooseAllSymbols()">
              All
            </button>
            <button class="btn" id="clear-button" ng-click="clearChosenSymbols()">
              Clear
            </button>
            <button class='btn btn-success' id="submit-button" ng-click="request()">
              Submit
            </button>
          </div>

          <div id="search-container">
            <label>
              Search: <input type="text" ng-model="searchText">
            </label>
          </div>

          <div id="table-container">
            <table class="table table-striped">
              <tr>
                <th>
                  Symbol
                </th>
                <th>
                  Name
                </th>
                <th>
                  Select
                </th>
              </tr>
              <tr ng-repeat="stock in namesAndSymbols | filter:searchText">
                <td>
                  {{ stock.Symbol }}
                </td>
                <td>
                  {{ stock.Name }}
                </td>
                <td class='text-center'>
                  <input type="checkbox" ng-model="stock.Checked">
                </td>
              </tr>
            </table>
          </div>
        </div>

        <div class="view-container" id="stocks-container">
          <div id="stocks-header-container">
            <div class="sub-header">
              Stocks
            </div>
            <div id="filter-container">
              Filter: <input type="text">
            </div>
          </div>

          <div id="table-explanation">
            <p>
              1d: Price on selected day minus the price 1 day ago...
            </p>
          </div>

          <table class='table table-striped'>
              <tr>
                <th>Symbol</th>
                <th>Price</th>
                <th>1d</th>
                <th>7d</th>
                <th>30d</th>
                <th>Trade?</th>
              </tr>
              <tr ng-repeat="stock in stockDetailsByDate[dates[rangeValue]]">
                <td>
                  {{ stock.symbol }}
                </td>
                <td>
                  {{ stock.priceOnDate | currency }}
                </td>
                <td>
                  {{ stock.priceADayAgo ? (stock.priceADayAgo | currency) : notAvailableString }}
                </td>
                <td>
                  {{ stock.priceSevenDaysAgo ? (stock.priceSevenDaysAgo | currency) : notAvailableString }}
                </td>
                <td>
                  {{ stock.priceThirtyDaysAgo ? ( stock.priceThirtyDaysAgo | currency) : notAvailableString }}
                </td>
                <td>
                  <a href="">
                    trade
                  </a>
                </td>
              </tr>
            </table>
        </div>
      </div>
      <div class="col-xs-6">
        <div class="view-container" id="date-picker-container">
          <div id="earliest-date" class='date-picker-date'>
            {{ dates[0] }}
          </div>
          <div id="current-date" class='date-picker-date'>
            {{ dates[rangeValue] }}
          </div>
          <div id="latest-date" class='date-picker-date'>
            {{ dates[rangeMax] }}
          </div>
          <input type="range" min="0" max="{{ rangeMax }}" step="1"  data-orientation="horizontal" ng-model="rangeValue">

        </div>

        <div class='view-container' id="main-view">
          {{ rangeMax }}
          {{ stockDetailsByDate }}
        </div>
      </div>
    </main>

    <!-- App -->
    <script src="/js/app.js"></script>

    <!-- Directives -->
    <script src="/js/directives/main_nav.js"></script>

    <!-- Services -->
    <script src="/js/services/stocks_service.js"></script>

    <!-- Controllers -->
    <script src="/js/controllers/stocks_controller.js"></script>
  </body>
</html>