<div id="portfolio" ng-controller = "PortfolioController">
  
  <main-view-header header = "Portfolio"
                    change-view = "changeView()"
                    view-name = "viewName">
  </main-view-header>

  <!-- Portfolio positions table -->
  <table class='table table-condensed' id='portfolio-positions-table'>
    <tr>
      <th>Symbol</th>
      <th>Quantity</th>
      <th>Cost Basis</th>
      <th>Current Value</th>
      <th>Profit/Loss</th>
      <th>Current Price</th>
      <th>1d</th>
      <th>7d</th>
      <th>30d</th>
      <th>Trade?</th>
    </tr>
    <!-- Only to calculate cash -->
    <tr>
      <td>CASH</td>
      <td></td>
      <td></td>
      <td>{{ portfolio[datesObject.chosenDate].cashAtDate | currency }}</td>
      <td>{{ returnProfitLossFromDaysAgo() | currency }}</td>
      <td></td>
      <td>{{ returnProfitLossFromDaysAgo(1) | currency }}</td>
      <td>{{ returnProfitLossFromDaysAgo(7) | currency }}</td>
      <td>{{ returnProfitLossFromDaysAgo(30) | currency }}</td>
      <td></td>
    </tr>
    <tr ng-repeat="(symbol, properties) in portfolio[datesObject.chosenDate]" ng-hide="symbol == 'cashAvailable' || symbol == 'cashAtDate' || symbol == 'unaccountedCash'">
      <td>{{ symbol }}</td>
      <td>{{ properties.quantityAtDate }}</td>
      <td>{{ returnCostBasis( symbol, datesObject.chosenDate ) }}</td>
      <td>{{ properties }}</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </table>

  <ul>
    <li ng-repeat="t in transactions">{{ t }}</li>
  </ul>

</div>